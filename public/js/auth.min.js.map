{"version":3,"sources":["auth.min.js"],"names":["authPage","document","querySelector","phoneNumber","verifyCodeInput","errorMessage","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","auth","useDeviceLanguage","window","recaptchaVerifier","RecaptchaVerifier","size","expired-callback","render","then","widgetId","grecaptcha","reset","$","mask","placeholder","addEventListener","event","eventTarget","target","id","appVerifier","telephone","value","dataset","page","signInWithPhoneNumber","confirmationResult","setAttribute","innerHTML","verificationId","catch","error","console","log"],"mappings":"AAUA,MAAMA,SAAWC,SAASC,cAAc,aAClCC,YAAcF,SAASC,cAAc,gBACrCE,gBAAkBH,SAASC,cAAc,eACzCG,aAAeJ,SAASC,cAAc,iBAE5C,IAAII,eAAiB,CACjBC,OAAQ,0CACRC,WAAY,kCACZC,YAAa,yCACbC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,eACnBC,MAAO,6CAIXC,SAASC,cAAcT,gBACvBQ,SAASE,OAAOC,oBAEhBC,OAAOC,kBAAoB,IAAIL,SAASE,KAAKI,kBAAkB,gBAAiB,CAC5EC,KAAQ,YACRC,mBAAoB,WAGhBJ,OAAOC,kBAAkBI,SAASC,MAAK,SAAUC,GAC7CC,WAAWC,MAAMF,SAK7BG,EAAE,gBAAgBC,KAAK,gBAAiB,CAAEC,YAAa,KAEvD9B,SAAS+B,iBAAiB,QAAUC,IAChC,IACI,MAAMC,EAAcD,EAAME,OAC1B,GAAuB,kBAAnBD,EAAYE,GAAwB,CACpC,IAAIC,EAAclB,OAAOC,kBACzB,IAAIkB,EAAYlC,YAAYmC,MACE,UAA3BL,EAAYM,QAAQC,OAAgBH,EAAU,iBACjDvB,SAASE,OAAOyB,sBAAsBJ,EAAWD,GAC5CZ,MAAK,SAAUkB,GAGZvC,YAAYwC,aAAa,WAAY,QACrCtC,aAAauC,UAAY,GACzB3C,SAASC,cAAc,mBAAmBoC,MAAQI,EAAmBG,eAErE5C,SAASC,cAAc,cAAc0C,UAAY,2UAKlDE,OAAM,SAAUC,GAEfC,QAAQC,IAAIF,GACZ1C,aAAauC,UAAY,wGAGvC,MAAOG,GACLC,QAAQC,IAAIF","file":"auth.min.js","sourcesContent":["// $(document).bind(\"contextmenu\",function(e) {\r\n//     e.preventDefault();\r\n//    });\r\n\r\n//    $(document).keydown(function(e){\r\n//        if(e.which === 123){\r\n//           return false;\r\n//        }\r\n//    });\r\n//Подтверждение телефонного номера start\r\nconst authPage = document.querySelector('#authPage')\r\nconst phoneNumber = document.querySelector('#phoneNumber')\r\nconst verifyCodeInput = document.querySelector('#verifyCode')\r\nconst errorMessage = document.querySelector('#errorMessage')\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyDAExM_ugRA98nQI7W-FsKq1AA-WxQKJrg\",\r\n    authDomain: \"airmarket-35b84.firebaseapp.com\",\r\n    databaseURL: \"https://airmarket-35b84.firebaseio.com\",\r\n    projectId: \"airmarket-35b84\",\r\n    storageBucket: \"airmarket-35b84.appspot.com\",\r\n    messagingSenderId: \"958389086537\",\r\n    appId: \"1:958389086537:web:75e1c29f055e13eef69298\"\r\n};\r\n// Initialize Firebase\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.auth().useDeviceLanguage()\r\n\r\nwindow.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('getVerifyCode', {\r\n    'size': 'invisible',\r\n    'expired-callback': function () {\r\n        // Response expired. Ask user to solve reCAPTCHA again.\r\n        // ...\r\n        window.recaptchaVerifier.render().then(function (widgetId) {\r\n            grecaptcha.reset(widgetId);\r\n        })\r\n    }\r\n});\r\n\r\n$(\"#phoneNumber\").mask(\"+998111111111\", { placeholder: '' });\r\n\r\nauthPage.addEventListener('click', (event) => {\r\n    try {\r\n        const eventTarget = event.target\r\n        if (eventTarget.id === 'getVerifyCode') {\r\n            var appVerifier = window.recaptchaVerifier;\r\n            let telephone = phoneNumber.value\r\n            if(eventTarget.dataset.page==='admin') telephone='+998971320307'\r\n            firebase.auth().signInWithPhoneNumber(telephone, appVerifier)\r\n                .then(function (confirmationResult) {\r\n                    // SMS sent. Prompt user to type the code from the message, then sign the\r\n                    // user in with confirmationResult.confirm(code).\r\n                    phoneNumber.setAttribute('readonly', 'true')\r\n                    errorMessage.innerHTML = ''\r\n                    document.querySelector('#verificationId').value = confirmationResult.verificationId\r\n\r\n                    document.querySelector('#formElems').innerHTML = `\r\n                        <input id=\"verifyCode\" name=\"verificationCode\" required type=\"text\" class=\"auth__form__input\"\r\n                            placeholder=\"Введите код проверки\">\r\n                        <button type=\"submit\" id=\"sendVerifyCode\" class=\"auth__form__submit\">Подтвердить</button>\r\n                        `\r\n                }).catch(function (error) {\r\n                    // Error; SMS not sent\r\n                    console.log(error);\r\n                    errorMessage.innerHTML = 'Произошла ошибка при отправке кода, проверьте номер телефона на корректность и попробуйте еще раз'\r\n                });\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n})\r\n//Подтверждение телефонного номера end"]}